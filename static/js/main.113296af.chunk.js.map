{"version":3,"sources":["components/Tooltip.js","components/Calendar.js","containers/Chart.js","actions.js","App.js","reducers.js","index.js"],"names":["AppTooltip","d3","attr","hideAll","data","tiphtml","i","holidays","holiday","push","className","key","t","this","props","d","dateData","shortMonthFormat","spacePaddedDate","thisDate","Date","thisDay","filter","el","day","setDate","getDate","onClick","hideTippy","icon","X","getholidays","React","Component","sourceParse","dayFormat","weekFormat","sourceFormat","fullMonthFormat","weeksInMonth","month","m","floor","offset","length","AppCalendar","lookupData","rollup","leaves","parseInt","object","parseData","createToolTip","node","width","height","isMobile","instance","_tippy","tippy","trigger","hideOnClick","arrow","theme","placement","getReferenceClientRect","left","right","top","bottom","onShow","popper","exclude","ReactDOM","render","childNodes","onHide","onTrigger","event","target","destroy","onClickOutside","parent","parentNode","e","document","querySelectorAll","Element","disable","remove","removeEventListener","stats","forEach","element","some","elem","date","count","name","glide","Glide","selWidth","getBoundingClientRect","isDesktop","columns","gutter","cellMargin","cellSize","months","range","destroyTooltips","svg","selectAll","enter","append","text","rectangle","getFullYear","getMonth","rect","style","on","datum","interpolatePurples","mount","prevprops","html","drawCalendar","id","data-glide-el","data-glide-dir","ChevronLeft","ChevronRight","connect","state","AppChart","context","fn","ms","timer","_","clearTimeout","getElementById","clientWidth","setTimeout","apply","arguments","onScreenWidthChange","onScreenHeightChange","queue","defer","process","await","err","setState","debouncedHandleResize","debounce","h","window","innerHeight","w","addEventListener","dispatch","type","payload","App","initialScreenSize","store","createStore","action","Object","assign","rootElement"],"mappings":"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","file":"static/js/main.113296af.chunk.js","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\nimport { hideAll } from 'tippy.js';\nimport Octicon, { X } from '@primer/octicons-react'\n\nexport default class AppTooltip extends React.Component {\n    hideTippy() {\n        d3.selectAll(\"rect.day\").attr(\"data-selected\", false)\n        hideAll()\n    }\n    getholidays(data) {\n        var tiphtml = []\n        for (var i in data.holidays) {\n            var holiday = data.holidays[i];\n            tiphtml.push(\n                <div className={`holidays--holiday holiday-${i}`} key={i}>\n                    <h3 className=\"holidays--holiday-name\">\n                        {holiday.holiday}\n                    </h3>\n                </div>\n            )\n        }\n        return tiphtml\n    }\n    render() {\n        var t = this,\n            { d, dateData } = t.props,\n            shortMonthFormat = d3.timeFormat(\"%b\"),\n            spacePaddedDate = d3.timeFormat(\"%e\"),\n            thisDate = new Date(d),\n            thisDay = dateData.filter((el) => {\n                return el.day == d\n            });\n\n        thisDate.setDate(thisDate.getDate() + 1)\n\n        return (\n            <div className={`holidays holidays-for-${d}`}>\n                <div className=\"holidays--exit\" onClick={t.hideTippy}>\n                    <Octicon icon={X} />\n                </div>\n                <div className=\"holidays--date\">\n                    <h4 className=\"holidays--date-month\">{shortMonthFormat(thisDate)}</h4>\n                    <h3 className=\"holidays--date-day number\">{spacePaddedDate(thisDate)}</h3>\n                </div>\n                <div className=\"holidays--container\">\n                    {t.getholidays(thisDay[0])}\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { connect } from 'react-redux';\nimport * as d3 from 'd3';\nimport { interpolatePurples } from 'd3-scale-chromatic';\nimport tippy, { hideAll } from 'tippy.js';\nimport Glide from '@glidejs/glide';\nimport Octicon, { ChevronLeft, ChevronRight } from '@primer/octicons-react'\nimport AppTooltip from './../components/Tooltip';\n\nvar sourceParse = d3.timeParse(\"%Y-%m-%d\"),\n    dayFormat = d3.timeFormat(\"%w\"),\n    weekFormat = d3.timeFormat(\"%U\"),\n    sourceFormat = d3.timeFormat(\"%Y-%m-%d\"),\n    fullMonthFormat = d3.timeFormat(\"%B\"),\n    spacePaddedDate = d3.timeFormat(\"%e\"),\n    weeksInMonth = function (month) {\n        var m = d3.timeMonth.floor(month)\n        return d3.timeWeeks(d3.timeWeek.floor(m), d3.timeMonth.offset(m, 1)).length;\n    },\n    mapStateToProps = state => {\n        return {\n            height: state.height,\n            width: state.width\n        }\n    };\n\nclass AppCalendar extends React.Component {\n    lookupData = () => d3.nest()\n        .key(function (d) { return d.day; })\n        .rollup(function (leaves) {\n            return d3.sum(leaves, function (d) { return parseInt(d.holidays.length); });\n        })\n        .object(this.parseData(this.props.data))\n    destroyTooltips(e) {\n        if (e) {\n            var t = this,\n                el = e.target,\n                instance = el._tippy;\n            if (instance) return\n        }\n        var t = this,\n            sel = '.day',\n            el = document.querySelectorAll(sel);\n\n        hideAll()\n        if (el.length > 0) {\n            for (var i in el) {\n                if (el[i] instanceof Element) {\n                    var instance = tippy(el[i])\n\n                    instance.disable()\n                    instance.destroy()\n                    d3.select(instance.popper).remove()\n\n                    el[i].removeEventListener('mouseup', t.createToolTip)\n                    d3.select(el[i]).attr(\"data-selected\", false)\n                }\n            }\n        }\n    }\n    createToolTip = (d) => {\n        var t = this,\n            el = d3.select(`[data-date=\"${d}\"]`).node(),\n            { width, height, data } = t.props,\n            isMobile = width <= 650 && height <= 768,\n            instance = el._tippy,\n            thisDate = new Date(d),\n            thisDay = t.parseData(data).filter((el) => {\n                return el.day == d\n            });\n\n        thisDate.setDate(thisDate.getDate() + 1)\n        if (!instance && thisDay[0]) {\n            tippy(el, {\n                trigger: 'click',\n                hideOnClick: false,\n                arrow: false,\n                theme: 'light-border',\n                placement: isMobile ? 'auto' : 'left-start',\n                getReferenceClientRect: !isMobile ? null : () => ({\n                    width: width - 40,\n                    height: 40,\n                    left: 20,\n                    right: 0,\n                    top: height > 650 ? width * .3 : width * .3,\n                    bottom: 0,\n                }),\n                onShow(instance) {\n                    d3.select(el).attr(\"data-selected\", true)\n                    d3.select(instance.popper).attr('style', 'opacity: 1')\n                    hideAll({ exclude: instance })\n                    ReactDOM.render(\n                        <AppTooltip d={d} instance={instance} dateData={thisDay} />,\n                        instance.popper.childNodes[0].childNodes[0])\n                },\n                onHide(instance) {\n                    d3.select(el).attr(\"data-selected\", false)\n                    d3.select(instance.popper).attr('style', 'opacity: 0')\n                },\n                onTrigger(instance, event) {\n                    if (d3.select(event.target).attr('data-selected') == 'true') {\n                        instance.destroy()\n                    }\n                },\n                onClickOutside(instance, event) {\n                    var parent = d3.select('[data-tippy-root]').node(),\n                        child = d3.select(event.target).node(),\n                        node = child.parentNode;\n                    while (node != null) {\n                        if (node == parent) return false;\n                        node = node.parentNode;\n                    }\n                    instance.destroy()\n                }\n            })\n        }\n    }\n    parseData(data) {\n        var stats = [];\n        data.forEach((element) => {\n            var foundDay = stats.some(elem => {\n                return elem.day == element.date\n            })\n            if (foundDay) {\n                stats.forEach(elem => {\n                    if (element.date === elem.day) {\n                        elem.count++\n                        var foundHoliday = elem.holidays.some(el => {\n                            return el.holiday == element.name\n                        })\n\n                        if (!foundHoliday) {\n                            elem.holidays.push({\n                                holiday: element.name\n                            })\n                        }\n                    }\n                })\n            }\n            else {\n                stats.push({\n                    day: element.date,\n                    count: 1,\n                    holidays: [{\n                        holiday: element.name\n                    }]\n                })\n            }\n        })\n        return stats;\n    }\n    drawCalendar() {\n        var t = this,\n            selector = \"#chart\",\n            { width } = t.props,\n            glide = new Glide('.glide'),\n            selWidth = d3.select(\"#chart-container\").node().getBoundingClientRect().width,\n            isDesktop = width >= 769,\n            daysOfTheWeek = 7,\n            columns = isDesktop ? 3 : 1,\n            gutter = isDesktop ? 10 : 40,\n            cellMargin = (selWidth / columns) / 50,\n            cellSize = (((selWidth / daysOfTheWeek) - cellMargin) / columns) - (gutter / 2),\n            months = d3.timeMonth.range(sourceParse(\"2019-01-01\"), sourceParse(\"2019-12-31\"));\n\n        t.destroyTooltips()\n\n        var svg = d3.select(selector)\n            .attr(\"style\", null)\n            .selectAll(\"li\")\n            .data(months)\n            .enter().append(\"li\")\n            .attr(\"class\", isDesktop ? null : \"glide__slide\")\n            .attr(\"width\", function (d) { return isDesktop ? ((cellSize * daysOfTheWeek) + (cellMargin * daysOfTheWeek) + gutter) : selWidth; })\n            .append(\"svg\")\n            .attr(\"class\", \"month\")\n            .attr(\"id\", function (d, i) { return \"slide-\" + i })\n            .attr(\"height\", function (d) { return isDesktop ? (cellSize * weeksInMonth(d)) + (cellMargin * 8) + (cellSize / 2) + cellMargin : (cellSize * weeksInMonth(d)) + (cellMargin * 8) + (cellSize / 2) })\n            .attr(\"width\", function (d) { return ((cellSize * daysOfTheWeek) + (cellMargin * daysOfTheWeek) + gutter); })\n            .attr(\"style\", `margin-bottom: ${cellSize / 4}px; margin-top: ${cellSize / 4}px`)\n\n        svg.append(\"text\")\n            .attr(\"class\", \"month-name\")\n            .attr(\"y\", cellSize / 1.5)\n            .attr(\"x\", function (d) { return (((cellSize * daysOfTheWeek) + (cellMargin * (daysOfTheWeek))) / 2) + ((cellMargin + gutter) / 2); })\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"style\", `font-size:${cellSize / 1.5}px`)\n            .text(function (d) { return fullMonthFormat(d); })\n\n        var rectangle = svg.selectAll(\"rect.day\")\n            .data(function (d, i) { return d3.timeDays(d, new Date(d.getFullYear(), d.getMonth() + 1, 1)); })\n            .enter()\n\n        var rect = rectangle.append(\"rect\")\n            .attr(\"class\", \"day day--empty\")\n            .attr(\"data-selected\", false)\n            .attr(\"width\", cellSize)\n            .attr(\"height\", cellSize)\n            .attr(\"rx\", 3).attr(\"ry\", 3)\n            .style(\"fill\", \"#e7e7e7\")\n            .attr(\"x\", function (d) { return (dayFormat(d) * cellSize) + (dayFormat(d) * cellMargin) + ((cellMargin + gutter) / 2); })\n            .attr(\"y\", function (d) { return ((weekFormat(d) - weekFormat(new Date(d.getFullYear(), d.getMonth(), 1))) * cellSize) + ((weekFormat(d) - weekFormat(new Date(d.getFullYear(), d.getMonth(), 1))) * cellMargin) + (cellSize + cellMargin / 2); })\n            .attr(\"data-date\", function (d) { return sourceFormat(d) })\n            .on(\"mouseup\", t.createToolTip)\n            .datum(sourceFormat);\n\n        rectangle.append(\"text\")\n            .attr(\"x\", function (d) { return (dayFormat(d) * cellSize) + (dayFormat(d) * cellMargin) + (cellSize / 2) + ((cellMargin + gutter) / 2); })\n            .attr(\"y\", function (d) { return ((weekFormat(d) - weekFormat(new Date(d.getFullYear(), d.getMonth(), 1))) * cellSize) + ((weekFormat(d) - weekFormat(new Date(d.getFullYear(), d.getMonth(), 1))) * cellMargin) + (cellSize + cellMargin / 2) + (cellSize / 2); })\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"dominant-baseline\", \"central\")\n            .attr(\"class\", \"month-day number\")\n            .attr(\"style\", `font-size:${cellSize / 2}px`)\n            .text(function (d) { return spacePaddedDate(new Date(d)) });\n\n        rect.filter(function (d) { return d in t.lookupData(); })\n            .style(\"fill\", function (d) { return interpolatePurples(t.lookupData()[d] / 3); })\n            .attr(\"class\", \"day day--holidays\");\n\n        t.rect = rect\n\n        if (!isDesktop) glide.mount()\n        else {\n            glide.disable()\n            d3.select('#slideshow').attr(\"style\", null)\n            glide.destroy()\n        }\n    }\n    componentDidUpdate(prevprops) {\n        var { width } = this.props;\n        if (prevprops.width != width) {\n            d3.select(\"#chart\").html(\"\")\n            this.drawCalendar()\n        }\n    }\n    componentDidMount() {\n        this.drawCalendar()\n    }\n    render() {\n        var isMobile = this.props.width <= 768\n        return (\n            <div id=\"slideshow\" className={isMobile ? \"glide\" : null}>\n                <div id=\"chart-container\" className={isMobile ? \"glide__track\" : null} data-glide-el={isMobile ? \"track\" : null}>\n                    <ul className={isMobile ? \"glide__slides\" : null} id=\"chart\">\n                    </ul>\n                </div>\n\n                <div className=\"glide__arrows\" data-glide-el=\"controls\">\n                    <button className=\"glide__arrow glide__arrow--left\" data-glide-dir=\"<\">\n                        <Octicon icon={ChevronLeft} />\n                    </button>\n                    <button className=\"glide__arrow glide__arrow--right\" data-glide-dir=\">\">\n                        <Octicon icon={ChevronRight} />\n                    </button>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default connect(mapStateToProps)(AppCalendar)","import React from 'react';\nimport { connect } from 'react-redux';\nimport * as d3 from 'd3';\nimport { queue } from 'd3-queue';\nimport tippy, { hideAll } from 'tippy.js';\nimport AppCalendar from './../components/Calendar';\nimport { resizeWidth, resizeHeight } from '../actions';\nimport 'tippy.js/dist/tippy.css';\nimport 'tippy.js/themes/light-border.css';\n\nvar mapStateToProps = state => {\n    return {\n        height: state.height,\n        width: state.width\n    }\n},\n    mapDispatchToProps = dispatch => {\n        return {\n            onScreenWidthChange: (event) => dispatch(resizeWidth(event)),\n            onScreenHeightChange: (event) => dispatch(resizeHeight(event))\n        }\n    };\n\nclass AppChart extends React.Component {\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n            data: []\n        };\n    }\n    destroyTooltips(e) {\n        if (e) {\n            var t = this,\n                el = e.target,\n                instance = el._tippy;\n            if (instance) return\n        }\n        var t = this,\n            sel = '.day',\n            el = document.querySelectorAll(sel);\n\n        hideAll()\n        if (el.length > 0) {\n            for (var i in el) {\n                if (el[i] instanceof Element) {\n                    var instance = tippy(el[i])\n\n                    instance.disable()\n                    instance.destroy()\n                    d3.select(instance.popper).remove()\n\n                    el[i].removeEventListener('mouseup', t.createToolTip)\n                    d3.select(el[i]).attr(\"data-selected\", false)\n                }\n            }\n        }\n    }\n    debounce(fn, ms) {\n        let timer\n        return _ => {\n            clearTimeout(timer)\n            if (this.props.width != document.getElementById('root').clientWidth) this.destroyTooltips()\n            timer = setTimeout(_ => {\n                timer = null\n                fn.apply(this, arguments)\n            }, ms)\n        };\n    }\n    componentDidMount() {\n        var t = this,\n            { onScreenWidthChange, onScreenHeightChange } = t.props;\n        // request the list of holidays\n        // a free key for dev purposes can be acquired from holidayapi.com\n        // the free version is limited to the previous year\n        queue()\n            .defer(d3.json, `https://holidayapi.com/v1/holidays?pretty&key=${process.env.REACT_APP_HOLIDAY_API_KEY}&country=US&year=${new Date().getFullYear() - 1}`)\n            .await(function (err, d) {\n                if (err) throw err;\n                t.setState({ data: d.holidays })\n            });\n            \n        const debouncedHandleResize = t.debounce(function handleResize() {\n            var h = window.innerHeight,\n                w = document.getElementById('root').clientWidth;\n            if (h != t.props.height) onScreenHeightChange(h)\n            if (w != t.props.width) onScreenWidthChange(w)\n        }, 250)\n        window.addEventListener('resize', debouncedHandleResize)\n    }\n    render() {\n        var { data } = this.state;\n\n        if (data.length == 0) return <></>\n        else return (\n            <main>\n                <AppCalendar data={data} />\n            </main>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppChart)","export const resizeWidth = (w) => ({ type: 'CHANGE_WIDTH', payload: w })\nexport const resizeHeight = (h) => ({ type: 'CHANGE_HEIGHT', payload: h })","import React from 'react';\nimport AppChart from './containers/Chart';\n\nfunction App() {\n  return <AppChart />\n}\n\nexport default App;","const initialScreenSize = {\n    height: window.innerHeight,\n    width: document.getElementById('root').clientWidth\n}\n\nexport const onScreenResize = (state = initialScreenSize, action = {}) => {\n    switch (action.type) {\n        case 'CHANGE_WIDTH': return Object.assign({}, state, { width: action.payload });\n        case 'CHANGE_HEIGHT': return Object.assign({}, state, { height: action.payload }); \n        default: return state;\n    }\n}","import \"core-js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, combineReducers } from 'redux';\nimport { Provider } from 'react-redux';\nimport './assets/styles/style.scss';\nimport App from './App';\nimport { onScreenResize } from './reducers';\n\n\nconst store = createStore(onScreenResize),\n  rootElement = document.getElementById('root')\n  \nReactDOM.render( <Provider store={store}><App /></Provider>, rootElement )\n"],"sourceRoot":""}